<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revelación Gradual de Texto</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="site.css">
</head>
<body>
    <div class="background" id="background"></div>
    <div id="text-container"></div>
    <div id="main-container">
        <nav id="nav-bar">
            <ul>
                <li><a href="#section-to-show" id="show-section"
                    data-text="Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos 
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos 
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos 
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos 
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos 
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos 
                               Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos Proyectos
                               " class="btn1 rounded-full">
                               Proyectos
                </a></li>
                <li><a href="#project2" 
                    data-text=" Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                     Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                      Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                       Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                        Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                         Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                          Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                           Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                            Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                             Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi
                              Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi 
                              Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi Sobre mi" 
                                class="btn2">
                                Sobre mi
                </a></li>
                <li><a href="#project3"
                     data-text="Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                      Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                       Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                        Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                         Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                          Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                           Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                            Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                             Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                              Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto
                               Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto Contacto" 
                                class="btn3">
                                Contacto
                </a></li>
            </ul>
        </nav>
        <div class="projects-container d-flex flex-lg-row justify-content-center" >
            <div  id="section-to-show" class="single d-flex flex-lg-row ">
                <div class="single-img d-flex">
                    <img src="./imagen.jpg" alt="">
                </div>
                <div class="single-detail d-flex">
                    <h4>Cielo Extremo ARG</h4>
                    <p class="parrafo d-flex">Sitio web <br> desarrollado con ASP.NET8 y SQL Server</p>
                    <div class="button-wrap">
                        <a href="https://cieloextremo.somee.com/" target="_blank">Visit →</a>
                    </div>
                    </div>
                </div>
        </div>
    </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        const finalMessage =
`  ╔═══╗         ╔╗     ╔═╗╔═╗    ╔╗                   
  ║╔═╗║        ╔╝╚╗    ║ ╚╝ ║    ║║                   
  ║║ ║╠══╦╗╔╦══╬╗╔╬╦═╗ ║╔╗╔╗╠══╦═╣║╔╦═╗╔══╗           
  ║╚═╝║╔╗║║║║══╣║║╠╣╔╗╗║║║║║║║═╣╔╣║╠╣╔╗╣╔╗║           
  ║╔═╗║╚╝║╚╝╠══║║╚╣║║║║║║║║║║║═╣║║╚║║║║║╚╝║╔══╗       
  ╚╝ ╚╩═╗╠══╩══╝╚═╩╩╝╚╝╚╝╚╝╚╩══╩╝╚═╩╩╝╚╩══╝╚╗╗╠═╦═╦═╗ 
      ╔═╝║                                 ╔╩╝║╩╬╗║╔╝ 
      ╚══╝                                 ╚══╩═╝╚═╝  
                                                      `;
    
        const revealInterval = 50;  // Tiempo en milisegundos entre revelación de celdas
        const randomInterval = 50;    // Tiempo en milisegundos entre actualizaciones de caracteres aleatorios
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let currentMatrix = [];
        let finalMatrix = [];
        const messageLines = finalMessage.split('\n');
        let revealedCells = new Set(); // Para evitar duplicados en las celdas reveladas
    
        function initializeMatrices() {
            for (let i = 0; i < messageLines.length; i++) {
                finalMatrix[i] = messageLines[i].split('');  // Matriz final con el mensaje
                currentMatrix[i] = Array.from({ length: messageLines[i].length }, () => generateRandomChar());
            }
        }
    
        function generateRandomChar() {
            return chars[Math.floor(Math.random() * chars.length)];
        }
    
        function updateText() {
            let displayedText = currentMatrix.map(line => line.join('')).join('\n');
            document.getElementById('text-container').textContent = displayedText;
        }
    
        function getRandomCell() {
            let row, col;
            do {
                row = Math.floor(Math.random() * finalMatrix.length);
                col = Math.floor(Math.random() * finalMatrix[0].length);
            } while (revealedCells.has(`${row},${col}`));
            return [row, col];
        }
    
        function revealNextSet() {
            const preDefinedCells = [
                [2, 5], [1, 1], [0, 4], [1, 7]
            ];
    
            let cellsToReveal;
    
            if (revealedCells.size < preDefinedCells.length) {
                cellsToReveal = preDefinedCells;
            } else {
                cellsToReveal = [];
                for (let i = 0; i < preDefinedCells.length; i++) {
                    cellsToReveal.push(getRandomCell());
                }
            }
    
            for (let [row, col] of cellsToReveal) {
                currentMatrix[row][col] = finalMatrix[row][col];
                revealedCells.add(`${row},${col}`);
            }
            updateText();
    
            if (!allRevealed()) {
                setTimeout(revealNextSet, revealInterval);
            } else {
                
                document.getElementById('text-container').style.color = 'rgb(245, 174, 174)';
                document.getElementById('background').style.color = 'rgb(88, 73, 109, 0.250)';
                document.getElementById('text-container').style.textShadow = '2px 2px 10px rgba(255, 255, 255, 0.400)';
                
                setTimeout(() => {
                document.getElementById('main-container').classList.add('show');
            }, 1000); // Tiempo adicional para asegurar que la animación esté completa
            }
        }
    
        function allRevealed() {
            return revealedCells.size >= finalMatrix.length * finalMatrix[0].length;
        }
    
        function updateRandomChars() {
            for (let i = 0; i < currentMatrix.length; i++) {
                for (let j = 0; j < currentMatrix[i].length; j++) {
                    if (currentMatrix[i][j] !== finalMatrix[i][j]) {
                        currentMatrix[i][j] = generateRandomChar();
                    }
                }
            }
            updateText();
    
            if (!allRevealed()) {
                setTimeout(updateRandomChars, randomInterval);
            }
        }
    
        function startAnimation() {
            initializeMatrices();
            updateText();
            updateRandomChars();
            setTimeout(revealNextSet, revealInterval);
        }
    
        function fillBackground() {
            const background = document.getElementById('background');
            const width = window.innerWidth;
            const height = window.innerHeight;
            const charSize = 7;
            const cols = Math.floor(width / charSize);
            const rows = Math.floor(height / charSize);
    
            let content = '';
            for (let y = 0; y < rows; y++) {
                for (let x = 0; x < cols; x++) {
                    content += generateRandomChar();
                }
                content += '\n';
            }
    
            background.textContent = content;
        }
    
        function updateBackground() {
            fillBackground();
            setInterval(fillBackground, 100);
        }
    
        window.addEventListener('resize', fillBackground);
        updateBackground();
        startAnimation();
        
        document.getElementById('show-section').addEventListener('click', function(event) {
    event.preventDefault(); // Previene el comportamiento predeterminado del enlace

    const section = document.getElementById('section-to-show');
    const sectionTop = section.getBoundingClientRect().top + window.pageYOffset; // Obtener la posición de la sección

    // Función para realizar el desplazamiento suave
    smoothScrollTo(sectionTop, 600, function() {
        // Añadir la clase para activar la animación de deslizamiento
        section.classList.add('visible');
    });
});

// Función de desplazamiento suave personalizada
function smoothScrollTo(target, duration, callback) {
    const start = window.pageYOffset;
    const distance = target - start;
    let startTime = null;

    function scrollAnimation(currentTime) {
        if (startTime === null) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const run = easeInOutQuad(timeElapsed, start, distance, duration);
        window.scrollTo(0, run);
        if (timeElapsed < duration) {
            requestAnimationFrame(scrollAnimation);
        } else {
            if (callback) callback(); // Ejecutar callback cuando el scroll finaliza
        }
    }

    requestAnimationFrame(scrollAnimation);
}

// Función de suavizado (ease-in-out) para el desplazamiento
function easeInOutQuad(t, b, c, d) {
    t /= d / 2;
    if (t < 1) return c / 2 * t * t + b;
    t--;
    return -c / 2 * (t * (t - 2) - 1) + b;
}

document.addEventListener('DOMContentLoaded', function() {
        const button = document.querySelector('.button-wrap a');

        button.addEventListener('click', function(event) {
            event.preventDefault();  // Previene la acción predeterminada de seguir el enlace

            // Añadir la clase 'clicked' para mostrar el estado de clic temporalmente
            button.classList.add('clicked');

            // Remover la clase 'clicked' y el estado activo manualmente después del clic
            setTimeout(function() {
                button.classList.remove('clicked'); // Eliminar estado visual
                button.blur(); // Forzar la pérdida del enfoque
                window.open(button.getAttribute('href'), '_blank');
            }, 150); // Ajusta el tiempo para que coincida con la duración de la animación
        });
    });
    </script>
</body>

</html>